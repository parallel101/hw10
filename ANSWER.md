# 改进前

```
134.008686s
```

# 改进后

开启openMP

```c++
49.100373s        加速：2.72x
```

参考03/00.cpp 指针数组来表示

```c++
OpenMp  29.86s 	  加速：4,48x
tbb 	17.48s    加速：7.66x
```

参考04/04.cpp 指针数组加上spin_mutex

```c++
 openMP 33.47s    加速：4.06x
 tbb    17.76s	  加速：7.54x
```

# 加速比

> 7.5x

# 实现方法

**封装稀疏网格的 Grid 类的？**

- 参考03/00.cpp 使用了指针的数组封装稀疏的Grid表格
- 参考04/04.cpp 在上一个的基础上使用了spin_mutex自旋锁
- 如果使用hash().pointer().dense的话，在WSL上回出现 out of memory

**有无位运算量化减轻内存带宽？**

- &   替代   %，   >>    替代   /，    |   替代   +



 **Grid 是否可以并行访问？OpenMP 还是 TBB？**

- 使用OpenMP进行并行访问。

  

**有没有用访问者模式缓存坐标，避免重复上锁？**

- 没有使用, 在WSL里使用这个，会莫名出现segment fault



**对于 `step()` 中这种插桩你是如何优化的？用了老师的什么知识点？**

- 将step()改造成了tbb并行。



# 我的创新点

> 如果利用了一些 SIMD 指令，循环分块等，请务必炫耀一下，并比较使用前后的加速效果。
